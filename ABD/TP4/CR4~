Wargnier Pierre 
TP2C 
21/01 
N°3

version :
mysql  Ver 14.14 Distrib 5.5.38, for debian-linux-gnu (x86_64) using readline 6.2
psql (PostgreSQL) 9.4.0
pgadmin : 1.2.0.0
mysql-workbench : 5.2.40

1) gestion des visites médicales dans un hopital

	1.1)
		\i Hopital_creation.sql
		\i Hopital_insertion.sql

	1.2)

			CREATE VIEW medPrix AS
			SELECT LIBELLE
			FROM MEDICAMENT,PRESCRIPTION
			WHERE PRESCRIPTION.CODEMEDICAMENT=MEDICAMENT.CODEMEDICAMENT
			GROUP BY LIBELLE
			HAVING sum(PRIX) >= ALL(SELECT SUM(PRIX) FROM MEDICAMENT,PRESCRIPTION
			WHERE PRESCRIPTION.CODEMEDICAMENT=MEDICAMENT.CODEMEDICAMENT
			GROUP BY MEDICAMENT.CODEMEDICAMENT);

		1.2.1)

			SELECT PATIENT.NUMSECUPATIENT,NOM,PRENOM
			FROM PATIENT,VISITE,PRESCRIPTION
			WHERE VISITE.CODEVISITE=PRESCRIPTION.CODEVISITE
			AND VISITE.NUMSECUPATIENT=PATIENT.NUMSECUPATIENT
			GROUP BY PATIENT.NUMSECUPATIENT,NOM,PRENOM
			HAVING COUNT(PRESCRIPTION.CODEMEDICAMENT) BETWEEN 1 AND 5;

		1.2.2)

			SELECT DISTINCT PATIENT.NOM
			FROM PATIENT,VISITE,MEDECIN
			WHERE VISITE.MATRICULEMEDECIN=MEDECIN.MATRICULEMEDECIN
			AND VISITE.NUMSECUPATIENT=PATIENT.NUMSECUPATIENT
			AND MEDECIN.NOM='HOUSE'
			GROUP BY PATIENT.NOM;

CREATE VIEW simple AS
SELECT PATIENT.NUMSECUPATIENT,PATIENT.NOM AS N1,PATIENT.PRENOM,MEDECIN.NOM AS N2,PRESCRIPTION.CODEMEDICAMENT
FROM PATIENT,VISITE,PRESCRIPTION,MEDECIN
WHERE VISITE.CODEVISITE=PRESCRIPTION.CODEVISITE
AND VISITE.MATRICULEMEDECIN=MEDECIN.MATRICULEMEDECIN
AND VISITE.NUMSECUPATIENT=PATIENT.NUMSECUPATIENT;




